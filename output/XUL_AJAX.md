**AJAX** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π JavaScript –∏ XML (Asynchronous JavaScript and
XML). –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤ (HTTP GET) –∏–ª–∏
–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ–±-—Å–∞–π—Ç–∞–º (HTTP POST) –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ XML. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Å–æ
—Å–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω—ã –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –æ—Ç–¥–∞–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å
–∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π XML. –ü–æ —Å–≤–æ–µ–π —Å—É—Ç–∏, AJAX —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript –æ–±—ä–µ–∫—Ç *XMLHttpRequest*,
–∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –±—Ä–∞—É–∑–µ—Ä–æ–≤, –∏ —É—Å–ø–µ—à–Ω–æ
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ XUL.

AJAX –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –∏
—á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –ø–æ–ø—É–ª—è—Ä–µ–Ω –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–º–æ–¥–Ω—ã—Ö —Ç–µ—á–µ–Ω–∏–π —Ç–∏–ø–∞
[Web 2.0](http://ru.wikipedia.org/wiki/Web_2.0).

–í XUL AJAX –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –¥–ª—è
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–∞–Ω–Ω—ã–µ —Å –¥—Ä—É–≥–∏—Ö —Å–∞–π—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä –≥–∞–ª–µ—Ä–µ—é –∏–∑
[Google Picasa](http://picasaweb.google.com), –∏–ª–∏ –ø–æ–≥–æ–¥—É —Å [Yahoo
Weather](http://weather.yahoo.com/). –î–∞–ª–µ–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π XML –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è
–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º –≤ JavaScript –æ–±—ä–µ–∫—Ç, –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω –≤ –∫–∞–∫–æ–π-–ª–∏–±–æ
—Ñ–æ—Ä–º–µ.

## –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

–û–±—ä–µ–∫—Ç XMLHttpRequest –æ–ø–∏—Å–∞–Ω —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    <nowiki>
    interface XMLHttpRequest
    {
      // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π
      attribute EventListener onreadystatechange;

      // –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
      const unsigned short UNSENT = 0;
      const unsigned short OPENED = 1;
      const unsigned short HEADERS_RECEIVED = 2;
      const unsigned short LOADING = 3;
      const unsigned short DONE = 4;
      readonly attribute unsigned short readyState;

      // —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
      void open(in DOMString method, in DOMString url);
      void open(in DOMString method, in DOMString url, in boolean async);
      void open(in DOMString method, in DOMString url,
                in boolean async, in DOMString user);
      void open(in DOMString method, in DOMString url, in boolean async,
                in DOMString user, in DOMString password);
      void setRequestHeader(in DOMString header, in DOMString value);

      // –∑–∞–ø—Ä–æ—Å
      void send();
      void send(in DOMString data);
      void send(in Document data);
      void abort();

      // –æ—Ç–≤–µ—Ç
      DOMString getAllResponseHeaders();
      DOMString getResponseHeader(in DOMString header);

      // –∞—Ç—Ä–∏–±—É—Ç—ã –æ—Ç–≤–µ—Ç–∞
      readonly attribute DOMString responseText;
      readonly attribute Document responseXML;
      readonly attribute unsigned short status;
      readonly attribute DOMString statusText;
    };
    </nowiki>

–ú–µ—Ç–æ–¥—ã *open(...)* —Å–ª—É–∂–∞—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤. –ú–µ—Ç–æ–¥—ã *send(...)*
- –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä—É. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π
*onreadystatechange* —Å–ª—É–∂–∏—Ç –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—à–µ–≥–æ
–∑–∞–ø—Ä–æ—Å–∞, –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—
–∑–∞–ø—Ä–æ—Å–∞—Ö).

–ó–∞–ø—Ä–æ—Å –º–æ–∂–Ω–æ –æ—Ç–æ—Å–ª–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è
—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Ç–æ *send()* –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∏–ª–∏ –æ—à–∏–±–∫–∏). –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
*send()* –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ—à–∏–±–∫–∏ –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç.
–ï—Å–ª–∏ –∂–µ –∑–∞–ø—Ä–æ—Å –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Ç–æ *send()* –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –∏
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ *onreadystatechange*, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞
–æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

–°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ *readyState*,
–∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ –æ–¥–Ω–æ–π –∏–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π. –°—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞
(HTTP —Å—Ç–∞—Ç—É—Å) –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ –∞—Ç—Ä–∏–±—É—Ç—É *status*. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—à—ë–ª
—É—Å–ø–µ—à–Ω–æ, *status* –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω *200* (HTTP Ok).

–° –ø–æ–º–æ—â—å—é *XMLHttpRequest* –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ
–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
*<file://>*. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç
–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ *status*, —Ä–∞–≤–Ω–æ–µ *0*.

*send()* –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ –≤—Å–µ–º—É –º–æ–∂–µ—Ç –æ—Ç—Å—ã–ª–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –µ–π –∫–∞–∫
–∞—Ä–≥—É–º–µ–Ω—Ç. –î–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ *GET* –æ—Ç—Å—ã–ª–∞—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω—É–∂–Ω–æ,
–ø–æ—ç—Ç–æ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—ë–º *null* –∏–ª–∏ *''* (–ø—É—Å—Ç—É—é
—Å—Ç—Ä–æ–∫—É). –î–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ *POST* –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—ë–º
–¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ—Ç–æ—Å–ª–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—É.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

    <nowiki>
    // —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç XMLHttpRequest
    var mXML = new XMLHttpRequest();

    // —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—
    function check(url)
    {
        try
        {

        dump("Checking " + url + "...\n");

        // —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π
        mXML.onreadystatechange = function()
        {
            if(this.readyState == 4)
            {
                // 200 –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, 0 –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—
                if(this.status == 200 || this.status == 0)
                    dosomething(this.responseText);
            }
        };

        // –∑–∞–¥–∞—ë–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:
        //
        // 'GET' - HTTP GET, –±—É–¥–µ–º —Å–∫–∞—á–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
        // url - URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
        // true - —Å–∫–∞—á–∏–≤–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        mXML.open('GET', url, true);

        // –º–æ–∂–µ–º –ø—Ä–∏–Ω–∏–º–∞—Ç—å XML
        mXML.setRequestHeader('Accept', 'text/xml');

        // –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π XML –∫–∞–∫ —Ç–µ–∫—Å—Ç
        // (–≤–æ–∑–º–æ–∂–Ω–æ, –≤ —ç—Ç–∏—Ö –ø–æ–ª—è—Ö –Ω–µ –±—É–¥–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
        mXML.overrideMimeType('text/plain');
        mXML.setRequestHeader('Content-Type', 'text/plain');

        // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        // –ø—Ä–∏–¥—ë—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ onreadystatechange
        mXML.send(null);

        }
        catch(e) { alert("Error:\n\n" + e); }
    }
    </nowiki>

–¢–æ–∂–µ —Å–∞–º–æ–µ, —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:

    <nowiki>
    // —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç XMLHttpRequest
    var mXML = new XMLHttpRequest();

    function check(url)
    {
        try
        {

        dump("Checking " + url + "...\n");

        // –∑–∞–¥–∞—ë–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:
        //
        // 'GET' - HTTP GET, –±—É–¥–µ–º —Å–∫–∞—á–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
        // url - URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
        // false - —Å–∫–∞—á–∏–≤–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        mXML.open('GET', url, false);

        mXML.setRequestHeader('Accept', 'text/xml');
        mXML.overrideMimeType('text/plain');
        mXML.setRequestHeader('Content-Type', 'text/plain');

        // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å, —Ç—É—Ç –∂–µ –∂–¥—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        mXML.send(null);

        // —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω
        if(mXML.status == 200 || mXML.status == 0)
            dosomething(mXML.responseText);

        }
        catch(e) { alert("Error:\n\n" + e); }
    }
    </nowiki>

## –ü—Ä–∏–º–µ—Ä

–í –ø—Ä–æ–µ–∫—Ç–µ *example6* –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–∞–∫ —Å–∫–∞—á–∏–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–ª–∏
—É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.

## –°—Å—ã–ª–∫–∏

  - ![–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ example6 (–ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ .tar.bz2)](example6.tar.bz2
    "–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ example6 (–ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ .tar.bz2)")
  - [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
    XMLHttpRequest](http://www.w3.org/TR/2007/WD-XMLHttpRequest-20071026/)
  - [XMLHttpRequest –æ—Ç
    Mozilla](http://developer.mozilla.org/en/docs/XMLHttpRequest)
  - [(–î–µ)—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä
    XML](http://www.kawa.net/works/js/xml/objtree-e.html)

[Category:XUL](Category:XUL "wikilink")