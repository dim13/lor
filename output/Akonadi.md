### Что такое Akonadi и с чем его едят

Akonadi — фреймворк для PIM в KDE, появившийся с приходом четвертой
версии данного DE. Основная идея заключается в том, чтобы
предоставить единое хранилище и API для всех приложений,
использующих PIM. С ним жизнь разработчиков стала проще, т.к.
больше не нужно писать код для, например, получения почты по IMAP,
т.к. этот функционал уже есть в Akonadi, вернее, его плагинах, которые
называются agents (в русском переводе «источники данных»).

Более подробно можно почитать
[здесь](http://habrahabr.ru/blogs/kde/61013/).

На данный момент все приложения из KDE PIM портированы на Akonadi и
используют его для своей работы, поэтому неудивительно, что он
является зависимостью для KDE, и при запуске среды, в которой
установлены приложения из PIM (kmail, korganizer, etc), он также
стартует.

### Зачем в Akonadi используется MySQL? Он ведь потребляет непозволительно много ресурсов\!

Почитать историю об этом можно
[тут](http://knotes.ru/2010/03/akonadi.html)

### Что делать, если я не пользуюсь PIM и не хочу, чтобы Akonadi запускался? (или «у меня мало писем/заметок/событий, я не хочу чтобы MySQL ел мою память\!»)

Многие советуют добавить

    StartServer=false

в файл

    ~/.config/akonadi/akonadiserverrc

однако, обратите внимание на секцию, в которой эта опция записывается.
Она связана с MySQL, поэтому, данный способ не отключает Akonadi.
Таким образом вы отключите сервер MySQL, из-за чего Akonadi будет
пытаться запуститься при каждом входе в систему, но не сможет, попутно
вывалив увесистый трейс в логи. Данный способ также сделает
неработоспособными все приложения PIM.

Правильный способ следующий — переключим его на использование SQLite.
Разнообразные выборки будут работать медленней (но мы же не
пользуемся/мало пользуемся этими данными, правда?), однако сам
сервер akonadi будет стартовать мгновенно и потреблять значительно
меньше ресурсов. Для этого в файле

    ~/.config/akonadi/akonadiserverrc

в секции \[%General\] приводим первую строчку к такому виду:

    Driver=QSQLITE3

и перезапускаем сервер

    $ akonadictl restart

Также имеет смысл отключить лишние элементы, которые имеют смысл и
удобны лишь при активном использовании PIM. Для начала идем в
«Параметры системы» — «Личные данные» — «Настройка источников
Akonadi» и убираем все, чем не пользеумся. Затем вызываем krunner
(Alt+F2), нажимаем кнопку настройки и отключаем все ненужные модули
(«Контакты», «События календаря» и т.п.). И последний штрих — идем в
настройки плазмоида «Цифровые часы» (ПКМ по нему — «Настроить виджет») и
в секции «Календарь» отключаем «Показывать события» (да-да, эта опция
будет приводить к запуску Akonadi). Всё, теперь он не должен
запускаться при старте системы.

Также, если почта все же используется, может быть полезно в настройках
аккаунта POP/IMAP выбрать «Отключать при выходе из приложения» — агент
не будет висеть в онлайне постоянно, а будет подключаться только при
запущенном KMail.