# –•–æ—Å—Ç–∏–Ω–≥

–¶–µ–ª—å –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –∫–∞–∫ —Å—Ç–∞—Ç—å —Ö–æ—Å—Ç–µ—Ä–æ–º —É—Ä–æ–≤–Ω—è Enterprise –Ω–∞
localhost. –†–µ—á—å –ø–æ–π–¥–µ—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–µ–º–æ–Ω–æ–≤ (iptables,
openssh, vsftpd, nginx + php, postfix –∏ –¥—Ä—É–≥–æ–µ), —á—Ç–æ–±—ã –Ω–∞ –≤–∞—à–µ–º
—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–∞ –¥–ª—è –∫–∞–∫–∏—Ö —Ü–µ–ª–µ–π - –Ω–µ –≤–∞–∂–Ω–æ) –≤—ã
—Å–æ–±—Å—Ç–µ–Ω–Ω–æ—Ä—É—á–Ω–æ –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Ö–æ—Å—Ç–∏–Ω–≥–∞. –ö–æ–≥–æ –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å
—Ä–∞–∑–º–µ—â–∞—Ç—å —É —Å–µ–±—è - –Ω–µ –≤–∞–∂–Ω–æ, –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º–∏ —Å–µ–±—è, –∞ –º–æ–∂–µ—Ç 100500
–∫–ª–∏–µ–Ω—Ç–æ–≤, –≤—Å–µ —É–ø–∏—Ä–∞–µ—Ç—Å—è –ª–∏—à—å –≤ —Ä–µ—Å—É—Ä—Å—ã –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.

–î–∞, –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ä–∞—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–µ–º–æ–Ω—ã
–≤ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
<u>–ø—Ä–∞–≤–∏–ª—å–Ω–æ</u> –≤—Å–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–æ, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —á–µ–≥–æ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ "–ª–∏–∂ –±—ã —Ä–∞–±–æ—Ç–∞–ª–æ" –Ω–∞—á–∏–Ω–∞—é—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–µ–ø–∏—Ç—å
–∫–æ—Å—Ç—ã–ª–∏ –≤—Ä–æ–¥–µ *mount --bind* –¥–ª—è —Å–≤—è–∑–∏ $HOME –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ www. –Ø ([Spoofing](Spoofing "wikilink")) —Å—á–∏—Ç–∞—é —Ç–∞–∫–æ–π
–ø–æ–¥—Ö–æ–¥ –Ω–µ –≤–µ—Ä–Ω—ã–º. [–¢—Ä–µ–¥ –Ω–∞
—Ñ–æ—Ä—É–º–µ](http://www.linux.org.ru/forum/admin/8859224), –¥–ª—è
–ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –∏ –ø—É—â–µ–π —è—Å–Ω–æ—Å—Ç–∏.
–°—Ç–∞—Ç—å—è –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–µ –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å (–≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤, —è —Å–∞–º
—Ç–æ–ª—å–∫–æ-—Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª –∏–∑—É—á–∞—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å), –Ω–æ –≤ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–∏
–≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è, —á—Ç–æ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–æ.

–û —Ç–æ–º, —á—Ç–æ —Ç–∞–∫–æ–µ [–•–æ—Å—Ç–∏–Ω–≥](http://ru.wikipedia.org/wiki/–•–æ—Å—Ç–∏–Ω–≥)

–í–æ–ø—Ä–æ—Å –Ω–∞ [–•–∞–±—Ä–∞—Ö–∞–±—Ä](http://habrahabr.ru/qa/34889/)

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ–ø–∏—Å–∞–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–æ–≥–æ
Shared-—Ö–æ—Å—Ç–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–∞–π—Ç–∞ –Ω–∞ –Ω–µ–º,
- –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∫—Ä—É—Ç–∏—Ç—Å—è nginx, php-fpm, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–ª–∏–≤–∞—é—Ç —Ñ–∞–π–ª—ã
—á–µ—Ä–µ–∑ vsftpd. –°–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –¥–æ–º–µ–Ω–æ–≤, —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
–° —ç—Ç–∏–º, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —Å–ø—Ä–∞–≤–∏—Ç—Å—è –ª—é–±–æ–π. :)

### –¢–µ–æ—Ä–∏—è

–†–µ–∫–æ–º–µ–Ω–¥—É—é –æ–±—Å—É–∂–¥–∞—Ç—å —Ç–µ–æ—Ä–∏—é, - –∫–∞–∫–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –æ–±—Ä–∞–∑–æ–º —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã
–±—ã—Ç—å –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º [–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫
—ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ](http://www.linux.org.ru/wiki/en/Comments:–•–æ—Å—Ç–∏–Ω–≥)

–ö –≤–æ–ø—Ä–æ—Å—É –æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—Å–µ —ç—Ç–æ –¥–æ–±—Ä–æ –∑–∞–≤–µ–¥–µ—Ç—Å—è. –ö–æ–Ω–µ—á–Ω–æ,
–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –Ω–æ —Å—Ä–∞–∑—É —É—Ç–æ—á–Ω–∏–º, —á—Ç–æ "–∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –≤
—Å—Ç–∞—Ç—å–µ –Ω–µ –±—É–¥–µ—Ç - –≤—ã –ª–∏–±–æ –¥–æ–ª–∂–Ω—ã —Å–∞–º–∏ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –ª–∏–±–æ —Å–∫–∞—á–∞—Ç—å –ø–∞–∫–µ—Ç—ã
–∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, —Ç.–∫. –≤ –∫–∞–∂–¥–æ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É.
–í —Ç–∞–∫–∂–µ —Å—Ç–∞—Ç—å–µ –Ω–µ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–æ —Ç–æ–Ω–∫–æ—Å—Ç–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–º–æ–Ω–æ–≤ (–µ—Å–ª–∏ —Ç–æ–≥–æ
–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞). –ï—Å–ª–∏ –Ω–∞ –≤–∞—à–µ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ
–∏–∑ —Å—Ç–∞—Ç—å–∏ —á—Ç–æ-—Ç–æ –Ω–µ –∑–∞–≤–µ–ª–æ—Å—å, –Ω–æ –≤—ã —Å–º–æ–≥–ª–∏ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É - –ø—Ä–æ—Å—å–±–∞
–¥–æ–ø–æ–ª–Ω–∏—Ç—å –æ–± —ç—Ç–æ–º —Å—Ç–∞—Ç—å—é, —É—Ç–æ—á–Ω–∏–≤ —á—Ç–æ –∑–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤, –∫–∞–∫–∞—è –≤–æ–∑–Ω–∏–∫–ª–∞
–ø—Ä–æ–±–ª–µ–º–∞ –∏ –µ–µ —Ä–µ—à–µ–Ω–∏–µ.

–û –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏, –∫–∞–∫ –æ—Å–Ω–æ–≤–µ —Ö–æ—Å—Ç–∏–Ω–≥–∞, –º–æ–∂–µ—Ç –∫—Ç–æ-–Ω–∏–±—É–¥—å —Ä–∞—Å—Å–∫–∞–∂–µ—Ç –≤
—Å—Ç–∞—Ç—å–µ, –Ω–æ –Ω–µ—Ç: —è –Ω–µ —Å–æ–±–∏—Ä–∞—é—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é, –Ω–∏
–∫—Ä–∞—Å–∏–≤—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∏–ø–∞ ISP... –Ω–∏—á–µ–≥–æ. –¢–æ–ª—å–∫–æ –∫–æ–Ω—Å–æ–ª—å,
—Ç–æ–ª—å–∫–æ –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç–∫–µ —Ö–æ—Å—Ç–∏–Ω–≥–∞ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º
–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ.

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—
(–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞–º–∏ –∏ –ø—Ä–æ—á–µ–µ -
**–Ω–µ –±—É–¥–µ—Ç**, –ø–æ—Å–∫–æ–ª—å–∫—É —É –∫–∞–∂–¥–æ–≥–æ –±—É–¥—É—â–µ–≥–æ —Ö–æ—Å—Ç–µ—Ä–∞ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏.
–ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –ø–æ–¥ –∫–∞–∂–¥–æ–≥–æ, –∫–æ–≥–¥–∞ –æ–¥–Ω–æ–º—É –Ω—É–∂–µ–Ω –∫–∞–∫–æ–π-–ª–∏–±–æ
–¥–µ–º–æ–Ω, –∞ –∫–æ–º—É –Ω–µ—Ç, –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏ —Ç—è–∂–µ–ª–æ —Ç–∞–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å. –ü–æ—ç—Ç–æ–º—É –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏
–ø—Ä–æ—á–µ–º—É –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏ –≤—Ä—É—á–Ω—É—é, - –≤—ã, –∫–æ–≥–¥–∞ —É–∂–µ
–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ—Å—å —Å–æ —Å–≤–æ–∏–º–∏ —Ü–µ–ª—è–º–∏ –∏ –≤–∞—à —Ö–æ—Å—Ç–∏–Ω–≥ –Ω–∞—á–Ω–µ—Ç
–±–æ–ª–µ–µ-–º–µ–Ω–µ–µ —Ä–∞–±–æ—Ç–∞—Ç—å, –º–æ–∂–µ—Ç–µ –ø–∏—Å–∞—Ç—å —Ç–∞–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–µ–±—è –∏
–¥–µ–ª–∏—Ç—å—Å—è —Å –æ–±—â–µ—Å—Ç–≤–æ–º.

–ö–æ—Ç–ª–µ—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ, –º—É—Ö–∏ –æ—Ç–¥–µ–ª—å–Ω–æ. –ö–∞–∂–¥—ã–π –≤–∏–¥ —Ö–æ—Å—Ç–∏–Ω–≥–∞ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω
–æ—Ç–¥–µ–ª—å–Ω–æ, –∏ –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–µ–º–æ–Ω—ã, —Ç–æ–ª—å–∫–æ
–∑–∞—Ç–µ–º –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω—ã, –∏ —Ç–æ–ª—å–∫–æ –∑–∞—Ç–µ–º –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

# Shared hosting

–ù–∞ shared hosting –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∞–π—Ç–æ–≤ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
–ù–∞—Å—Ç—Ä–æ–∏–º nginx + php-fpm, vsftpd —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Å–∞–π—Ç–∞.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### nginx

–ü—É—Å—Ç—å –≤—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ nginx, –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ nginx.conf –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã (–≤
–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –º–Ω–æ–≥–æ howto, –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –Ω–µ –±—É–¥–µ–º), —Ç–µ–ø–µ—Ä—å —Å—Ä–∞–∑—É –∫
–æ—Å–Ω–æ–≤–µ —Ö–æ—Å—Ç–∏–Ω–≥–∞.

–ú—ã –±—É–¥–µ–º —Ä–∞–∑–¥–µ–ª—è—Ç—å –≤—Å–µ –Ω–∞—à–∏ –¥–æ–º–µ–Ω—ã (—Å–∞–π—Ç—ã) –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –ø–æ—ç—Ç–æ–º—É –≤
**nginx.conf** –≤ –¥–∏—Ä–µ–∫—Ç–∏–≤—É **http { }** –≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü –¥–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É
**include**

    ... –∫–∞–∫–∏–µ-—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...

    http {

      ... –∫–∞–∫–∏–µ-—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...

      include sites-conf/*;

    }

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ä—è–¥–æ–º —Å –∫–æ–Ω—Ñ–∏–≥–æ–º —Å–æ–∑–¥–∞–µ–º –¥–≤–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

    root@linux:/etc/nginx# mkdir sites-conf
    root@linux:/etc/nginx# mkdir sites-avail

nginx –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∞–π—Ç–æ–≤ (–¥–∏—Ä–µ–∫—Ç–∏–≤—ã **server**) –∏–∑
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ sites-conf.

–í sites-conf –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —Å–∏–º–ª–∏–Ω–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤
sites-avail.

–ù–∞–¥–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–∞–π—Ç - —Å–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫ —Ç–∏–ø–∞ **ln -s
sites-avail/localhost.localdomain.conf sites-conf/**, –Ω–∞–¥–æ —É–¥–∞–ª–∏—Ç—å —Å–∞–π—Ç
- —É–¥–∞–ª—è–µ–º —Å–∏–º–ª–∏–Ω–∫.

### php-fpm

–ù–µ –∑–Ω–∞—é –∫–∞–∫ –≤ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö, –Ω–æ –≤ Arch Linux **nginx** +
**php-fpm** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

–ù–∏—á–µ–≥–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

### vsftpd

vsftpd –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏ —Å–∞–π—Ç–æ–≤ –Ω–∞ –Ω–∞—à–µ–º
shared hosting'–µ.

–û —Ç–æ–º, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å vsftpd –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
—á–∏—Ç–∞–π—Ç–µ [–≤ —Å—Ç–∞—Ç—å–µ Spoofing'–∞ –Ω–∞
–•–∞–±—Ä–∞—Ö–∞–±—Ä](http://habrahabr.ru/post/166147/). –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ
—Å–∫–æ–ø–∏–ø–∞—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –≤ –∫–æ–Ω—Ü–µ —Å—Ç–∞—Ç—å–∏.

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∏—á–µ–≥–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

## –î–æ–º–µ–Ω—ã

–°–æ–∑–¥–∞–¥–∏–º –æ–¥–∏–Ω –¥–æ–º–µ–Ω localhost.localdomain.

### nginx

–í **sites-avail/localhost.localdomain.conf** –∑–∞–ø–∏—à–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
—Å–µ—Ä–≤–µ—Ä–∞ (—Å–∞–π—Ç–∞) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π php.

```
  server {
    listen 80 default_server;
    server_name localhost.localdomain;

    root /srv/http/localhost.localdomain/w3;

    location /default.php {
      include fastcgi.conf;
      fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
    }
    location / {
      try_files $uri $uri/ /default.php;
    }
  }

  server {
    listen 80;
    server_name localhost;

    return 301 $scheme://localhost.localdomain$request_uri;
  }
```

*–î–ª—è –ø—É—â–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω /default.php –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ,
—á—Ç–æ–±—ã —Ö–∞—Ü–∫–µ—Ä—ã –Ω–µ —Å–º–æ–≥–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ª–∏—Ç—ã–π —à–µ–ª–ª.*

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx —Å–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫

    root@linux:~# cd /etc/nginx
    root@linux:/etc/nginx# ln -s sites-avail/localhost.localdomain.conf sites-conf/

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞

    root@linux:~# cd /srv/http
    root@linux:/srv/http# mkdir localhost.localdomain
    root@linux:/srv/http# mkdir localhost.localdomain/w3

–£–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ (**nginx -t**), nginx
–º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å.

### php-fpm

–ó–∞–ø—É—Å–∫–∞–µ–º.

### vsftpd

–ù–∞—Å—Ç—Ä–æ–∏–≤ —Å–µ—Ä–≤–µ—Ä —Å –≤–∏—Ä—É—Ç–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º.

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### nginx

–ù–∏—á–µ–≥–æ.

### php-fpm

–ù–∏—á–µ–≥–æ.

### vsftpd

–í —Ñ–∞–π–ª \~/vsftpd_logins.txt –≤–ø–∏—Å—ã–≤–∞–µ–º –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä

    localhost.localhost
    password
    test
    password

–≥–¥–µ localhost.localhost –∏ test —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ vsftpd, –∞ —Å–ª–µ–¥–æ–º –∏—
–ø–∞—Ä–æ–ª–∏.

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –±–∞–∑—É

    root@linux:~# rm /etc/vsftpd_login.db
    root@linux:~# db_load -T -t hash -f ~/logins.txt /etc/vsftpd_login.db

–°–æ–∑–¥–∞–µ–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≥–¥–µ —É–∫–∞–∑—ã–≤–∞–µ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–º–∞—à–Ω–µ–π
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ - –¥–æ–º–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–í –¥–≤—É—Ö —Ñ–∞–π–ª–∞—Ö **/etc/vsftpd_user_conf/localhost.localhost** –∏
**/etc/vsftpd_user_conf/test** (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–º–µ–Ω–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞
—Å–µ—Ä–≤–µ—Ä–µ) –ø–∏—à–µ–º –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ

    allow_writeable_chroot=YES

    guest_username=http

    local_root=/srv/http/localhost.localdomain

–ò —Ç–µ–ø–µ—Ä—å, –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º localhost.localdomain –∏–ª–∏ test -
–æ–Ω–∏ –æ–±–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /srv/http/localhost.localdomain, –≤
–∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∏—Ç –∏—Ö —Å–∞–π—Ç.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

FIXME: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –µ—â–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, –±–æ—é—Å—å —á—Ç–æ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –≥—Ä—É–ø–ø —Ç—É—Ç –Ω–µ –æ–±–æ–π—Ç–∏—Å—å, –Ω–æ —è –µ—â–µ –¥—É–º–∞—é –Ω–∞–¥
—ç—Ç–∏–º –≤–æ–ø—Ä–æ—Å–æ–º. :3