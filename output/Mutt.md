Mutt - –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç, –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏ –ø—Ä–æ—Å—Ç –≤
—É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (–∏–∑ –∫–æ—Ä–æ–±–∫–∏ –∏–º–µ–µ—Ç –ø–∞–Ω–µ–ª—å —Å —Ö–æ—Ç–∫–µ—è–º–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏,
–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Mutt'–æ–º –∫–æ—Ç–æ—Ä—ã—Ö "—Ö–≤–∞—Ç–∏—Ç –≤—Å–µ–º"). –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π
—ç–ª–µ–º–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ —É–≥–æ–¥–Ω–æ, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –≤—ã –Ω–µ –±—Ä–µ–∑–≥—É–µ—Ç–µ
–∫–æ–Ω—Å–æ–ª—å—é - —ç—Ç–æ –∏ –≤–æ–≤—Å–µ –ª—É—á—à–∏–π –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—á—Ç–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

–ï—Å–ª–∏ –≤—ã –≤–ø–µ—Ä–≤—ã–µ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å —Å –ø–æ—á—Ç–æ–π - —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ –ø–ª–æ—Ö–æ, –µ—Å–ª–∏ –≤—ã
—Ä–∞–Ω–µ–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –ø–æ—á—Ç–æ–π, –ø—Ä–∏–≤—ã–∫–ª–∏ –∫ —á–µ–º—É-—Ç–æ ("—Å–∏–Ω–¥—Ä–æ–º —É—Ç–µ–Ω–∫–∞") –∏ —É–∂–µ
–∏–∑–±–∞–ª–æ–≤–∞–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏.
–ó–∞–±—É–¥—å—Ç–µ –≤—Å–µ, —á—Ç–æ –≤—ã –∑–Ω–∞–ª–∏ –æ –ø–æ—á—Ç–µ —Ä–∞–Ω—å—à–µ.
–ö –ø—Ä–∏–º–µ—Ä—É: –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ - –∫–∞–∂–¥—ã–π
–∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é "–í—Ö–æ–¥—è—â–∏–µ" –∏ —Ç.–ø., Mutt –Ω–∞ —ç—Ç–æ –Ω–µ
—Ä–∞—Å—á–∏—Ç–∞–Ω, –∏ —ç—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º, –ø—Ä–æ—Å—Ç–æ
–ø–æ–π–º–∏—Ç–µ, —á—Ç–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –ø–æ—á—Ç—É –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –Ω–µ –Ω—É–∂–Ω–æ, –≤–µ–¥—å
–∞–∫–∫–∞—É–Ω—Ç—ã –∏ —Ç–∞–∫ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –≤–∞–º, –ø–æ—ç—Ç–æ–º—É —Ö—Ä–∞–Ω–∏—Ç—å —Ç—É –∂–µ "–í—Ö–æ–¥—è—â—É—é" –ø–æ—á—Ç—É
—Å–æ –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å–ª–µ–¥—É–µ—Ç –≤ <u>–æ–¥–Ω–æ–π</u> –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

–í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å–∫—Ä—ã—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–≤–µ—Ç–æ–≤ –∏ —Ç—Ä—é–∫–æ–≤, –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞
—á–∞—Å—Ç–æ–∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Å—Ç–∞–ª—å–Ω–æ–µ. –°—Ç–∞—Ç—å—é —Ç–∞–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤—ã
–±–æ–ª–µ–µ –Ω–∏–≥–¥–µ –Ω–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç–µ. –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–∞–º–∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç–µ –º–µ—Å—è—Ü –Ω–∞
–∏–∑—É—á–µ–Ω–∏–µ –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

# –°–≤—è–∑–∫–∞ mutt, msmtp, fetchmail –∏ procmail

–ö–∞–∫ –∫–ª–∏–µ–Ω—Ç, Mutt –º–æ–∂–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –ø–æ—á—Ç–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –∏
—á–∏—Ç–∞—Ç—å –ø–æ—á—Ç—É –ø—Ä—è–º–æ —Å –Ω–∏—Ö –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–µ, —Ç.–µ. –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ
standalone-–∫–ª–∏–µ–Ω—Ç, –Ω–æ —è
([Spoofing](http://www.linux.org.ru/people/Spoofing/profile)) —Å—á–∏—Ç–∞—é
–ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ç–æ–≥–æ –±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ò –∫—É–¥–∞
–±–æ–ª–µ–µ –ª—É—á—à–∏–º –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—á—Ç—É –ª–æ–∫–∞–ª—å–Ω–æ (—Ö–æ—Ç—è –±—ã —Å —Ü–µ–ª—å—é –±—ç–∫–∞–ø–∞ –æ—Ç
—Ñ–∞–∫–∞–ø–∞).

–ß–µ—Ä–µ–∑ mutt –º—ã –±—É–¥–µ–º —á–∏—Ç–∞—Ç—å –ø–æ—á—Ç—É, –ø—Ä–∏ –ø–æ–º–æ—â–∏ msmtp –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞, –∏
—á–µ—Ä–µ–∑ fetchmail —Å–∫–∞—á–∏–≤–∞—Ç—å –ø–∏—Å—å–º–∞ - –¥–∞–ª–µ–µ, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –±—É–¥–µ—Ç
–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ —Ñ–∏–ª—å—Ç—Ä procmail, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –ø–æ—Å–ª–µ –µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
—Å–æ—Ö—Ä–∞–Ω–∏—Ç –ø–æ—á—Ç—É –≤ —è—â–∏–∫–∞—Ö.

## mutt

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª Mutt –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **\~/.muttrc**, –ª–∏–±–æ
**\~/.mutt/muttrc**. –ü–æ—á—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ
**/var/spool/mail/${LOGNAME}** —Ñ–æ—Ä–º–∞—Ç–∞ mbox (–≥–¥–µ
*${LOGNAME}*@example.org –∏–º—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.). **Hint**: –¥–ª—è
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è*root* —ç—Ç–æ *postmaster*@example.org

–°–æ–∑–¥–∞–¥–∏–º –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–∞–ø–∫—É Mail, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –ª–µ–∂–∞—Ç—å –≤—Å—è
–ø–æ—á—Ç–∞, –∏ –≤ –Ω–µ–π –∂–µ —Å–æ–∑–¥–∞–¥–∏–º "—è—â–∏–∫–∏" (—Ñ–∞–π–ª—ã —Ñ–æ—Ä–º–∞—Ç–∞ mbox).

    user@linux$ mkdir ~/Mail
    user@linux$ cd ~/Mail
    user@linux$ touch "INBOX"  "Drafts"  "Sent Mail"  "All Mail"  "Spam"  "Trash"

–ü–æ –ø–æ—Ä—è–¥–∫—É: *–≤—Ö–æ–¥—è—â–∏–µ* (–Ω–æ–≤—ã–µ –∏–ª–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞), *—á–µ—Ä–Ω–æ–≤–∏–∫–∏*
(–Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞), *–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ*, *–≤—Å—è –ø–æ—á—Ç–∞* (–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
–ø–∏—Å—å–º–∞), *—Å–ø–∞–º*, *—É–¥–∞–ª–µ–Ω–Ω—ã–µ* (–Ω–µ –Ω—É–∂–Ω—ã–µ –ø–∏—Å—å–º–∞).

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é **\~/.mutt**, –≤ –Ω–µ–π –ª—é–±—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º
—Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º –æ—Ç–∫—Ä–æ–π—Ç–µ (—Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π) —Ñ–∞–π–ª **muttrc**, –∏ —É–∂–µ –≤
–Ω–µ–º –º—ã —É–∫–∞–∂–µ–º, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞—à–∞ –ø–æ—á—Ç–∞.

```
  set folder = "${HOME}/Mail"
  set spoolfile = "+INBOX"
  set mbox = "+All Mail"
  set postponed = "+Drafts"
  set record = "+Sent Mail"

  set move
  set postpone
  set copy
```

  - **folder** - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≥–¥–µ –ª–µ–∂–∞—Ç "—è—â–∏–∫–∏", –æ–Ω–∞ —Ç–∞–∫ –∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞
    —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (imap, pop3).
  - **spoolfile** - "–í—Ö–æ–¥—è—â–∏–µ". Mutt –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –æ—Ç–∫—Ä–æ–µ—Ç —ç—Ç–æ—Ç —è—â–∏–∫
    –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é.
  - **mbox** - –∫–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—á–∏—Ç–∞–µ—Ç–µ –ø–∏—Å—å–º–æ, –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤—Å—è
    –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—Å—è —Å—é–¥–∞ (–æ–ø—Ü–∏—è *set move*).
  - **postponed** - —á–µ—Ä–Ω–æ–≤–∏–∫–∏, –µ—Å–ª–∏ –Ω–∞—á–∞–ª–∏ –ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ –∏ —Ä–µ—à–∏–ª–∏
    –æ—Ç–ª–æ–∂–∏—Ç—å "–Ω–∞ –ø–æ—Ç–æ–º" (–æ–ø—Ü–∏—è *set postpone*).
  - **record** - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ (–æ–ø—Ü–∏—è *set copy*)

–ú—ã —É–∫–∞–∑–∞–ª–∏ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ **folder**, –∏ –ø—É—Ç—å –¥–æ –≤—Å–µ—Ö —è—â–∏–∫–æ–≤ —Ç–µ–ø–µ—Ä—å
–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ–≥–æ **folder**. –ó–Ω–∞–∫ **+** (–ø–ª—é—Å–∞) –ø–µ—Ä–µ–¥
—è—â–∏–∫–æ–º –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ –Ω–∞—á–∞–ª–æ –∫ –Ω–µ–º—É –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑
**folder**, –Ω–∞–ø—Ä–∏–º–µ—Ä: $folder + $spoolfile = ${HOME}/Mail/INBOX.
–î–∞–ª–µ–µ –≤–∫–ª—é—á–∏–º –æ–ø—Ü–∏–∏: *move*, *postpone*, *copy*. –ò —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
–ø–∏—Å—å–º–∞ –ø–æ –∑–∞–∫—Ä—ã—Ç–∏—é –∫–ª–∏–µ–Ω—Ç–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –∏–∑ —è—â–∏–∫–∞ "–í—Ö–æ–¥—è—â–∏–µ" –≤
—è—â–∏–∫ "–ê—Ä—Ö–∏–≤", –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–∏—Å—å–º–∞ –∏ –æ—Ç–º–µ–Ω—ã —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –æ–Ω–æ
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —è—â–∏–∫–µ "–ß–µ—Ä–Ω–æ–≤–∏–∫–∏", –∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å—å–º–∞ –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤
—è—â–∏–∫–µ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö" –ø–∏—Å–µ–º.

–ü–æ—á–µ–º—É –≤—Å–µ —Ç–∞–∫? –ü–æ—Ç–æ–º—É —á—Ç–æ —Ç–∞–∫ –±—ã–ª–æ –∑–∞–¥—É–º–∞–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –ø–æ—á—Ç–æ–≤–æ–≥–æ
–∫–ª–∏–µ–Ω—Ç–∞ Mutt. –ß—Ç–æ-—Ç–æ –∏–∑ –¥–∞–Ω–Ω–æ–≥–æ –≤–∞–º –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ–ø—Ä–∏–≤—ã—á–Ω—ã–º:
—Ç–æ–ª—å–∫–æ –ª–∏—à—å –ø–æ—Ç–æ–º—É, —á—Ç–æ –∫–∞–∫ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç–∞—Ç—å–∏, - –≤—ã –º–æ–∂–µ—Ç–µ
–±—ã—Ç—å –∏–∑–±–∞–ª–æ–≤–∞–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏. :)

## msmtp

msmtp –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∏—à—É—Ç—Å—è –≤
**\~/.msmtprc**.

–ù–∞—Å—Ç—Ä–æ–∏–º –Ω–∞—à Google Mail –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.

    defaults
    tls on
    tls_starttls on
    tls_certcheck off
    auth on

    account google
    from username@gmail.com
    host smtp.gmail.com
    port 587
    user username@gmail.com
    password ********
    tls_certcheck on
    tls_fingerprint 34:B4:3E:66:71:D8:AC:5A:47:76:7F:B7:CD:E4:31:08:F4:A5:DD:A8

    account default: google

–£–∫–∞–∑–∞–≤ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **username@gmail.com** –∏ –ø–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ
–∑–≤–µ–∑–¥–æ—á–µ–∫. –í –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥–µ –º—ã –≤–∫–ª—é—á–∏–ª–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ tls –∏
–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∏—Å—å–º–∞, –Ω–æ –æ—Ç–∫–ª—é—á–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É
—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤. –î–∞–ª–µ–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –∞–∫–∫–∞—É–Ω—Ç google (—É–∫–∞–∑–∞–≤ –µ–≥–æ
–∞–∫–∫–∞—É–Ω—Ç–æ–º –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é) –∏ —É–∫–∞–∂–µ–º fingerprint –≤—Ä—É—á–Ω—É—é, –∫–∞–∫
–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å fingerprint —Å–µ—Ä–≤–µ—Ä–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

    msmtp --serverinfo --host=smtp.gmail.com --tls=on --port=587 --tls-certcheck=off

–∏ –≤–ø–∏—à–∏—Ç–µ –µ–≥–æ (SHA1 Fingerprint) –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª. –¢–µ–ø–µ—Ä—å –≤—ã
–º–æ–∂–µ—Ç–µ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–π –ø–æ—á—Ç—ã, —Ç.–∫. –≤
—Å–ª—É—á–∞–µ —á–µ–≥–æ –ø–æ—á—Ç–∞ –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.

## fetchmail

fetchmail –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ—á—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∏–ª—å—Ç—Ä—É (–∫ –ø—Ä–∏–º–µ—Ä—É
procmail), –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–µ–∂–∞—Ç –≤ **\~/.fetchmailrc**.

–ù–∞ –ø—Ä–∏–º–µ—Ä–µ Google Mail –Ω–∞—Å—Ç—Ä–æ–∏–º —Å–±–æ—Ä –ø–æ—á—Ç—ã —Å –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞, –æ—Ç–∫—Ä—ã–≤
\~/.fetchmailrc –ª—é–±—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º.

    defaults
    fetchall
    keep

    poll imap.gmail.com protocol imap
    username "username@gmail.com" is "username" password "password"
    ssl
    folder "INBOX"
    # folder "[Gmail]/All Mail"
    folder "[Gmail]/Spam"
    # folder "[Gmail]/Trash"
    # folder "[Gmail]/Drafts"
    # folder "[Gmail]/Sent Mail"
    # folder "[Gmail]/Important"
    # folder "[Gmail]/Chats"
    # folder "[Gmail]/Starred"
    mda "procmail -d %T"

–í –¥–∏—Ä–µ–∫—Ç–∏–≤–µ **defaults** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –∫–æ –≤—Å–µ–º
–∞–∫–∫–∞—É–Ω—Ç–∞–º, –¥–∞–ª–µ–µ —Å–ª–µ–¥—É—é—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤—ã **poll** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–¥—Ä–µ—Å–∞
—Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ—á—Ç—É. –ú—ã —É–∫–∞–∑–∞–ª–∏ —Å–±–æ—Ä
–≤—Å–µ–π –ø–æ—á—Ç—ã, –Ω–æ –æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

–í –¥–∏—Ä–µ–∫—Ç–∏–≤–µ poll –≤–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π –ª–æ–≥–∏–Ω
**username@gmail.com**, –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª—é–±–æ–µ) –∏ –ø–∞—Ä–æ–ª—å –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞.

–í–∫–ª—é—á–∏–º SSL –∏ —É–∫–∞–∂–µ–º –∏–∑ –∫–∞–∫–∏—Ö —è—â–∏–∫–æ–≤ –Ω–∞–º —Å–ª–µ–¥—É–µ—Ç –∑–∞–±—Ä–∞—Ç—å –ø–æ—á—Ç—É, - –≤
—Å–ø–∏—Å–∫–µ —É–∫–∞–∑–∞–Ω—ã –≤—Å–µ —è—â–∏–∫–∏ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ Google
Mail, —Ç–∞–∫ —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ, –Ω–æ –∞
—Å–µ–π—á–∞—Å –ø–æ—á—Ç–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ "–í—Ö–æ–¥—è—â–∏—Ö" –∏ "–°–ø–∞–º–∞". –ò –∑–∞—Ç–µ–º,
–∫–∞–∂–¥–æ–µ –ø–∏—Å—å–º–æ –ø—Ä–æ–π–¥–µ—Ç —É–∂–µ –≤–∞—à—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é...

## procmail

procmail —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ—á—Ç—É –∏ –∑–∞—Ç–µ–º –µ–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —è—â–∏–∫–∏. –í
–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ **\~/.procmailrc** —É–∫–∞–∂–µ–º, —á—Ç–æ–±—ã
–ø—Ä–æ—Å—Ç–æ –≤—Å—è –≤—Ö–æ–¥—è—â–∞—è –ø–æ—á—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –≤ *\~/Mail/INBOX*.

    PATH="/bin:/usr/bin:/usr/bin"
    MAILDIR="${HOME}"
    DEFAULT="/var/spool/mail/${LOGNAME}"
    VERBOSE="off"

    :0 c
    Mail/INBOX

**Hint**: –µ—Å–ª–∏ –≤—ã —É–∫–∞–∂–∏—Ç–µ **/** (—Å–ª—ç—à) –≤ –∫–æ–Ω—Ü–µ –ø—É—Ç–∏ —è—â–∏–∫–∞, —Ç–æ –ø–æ—á—Ç–∞
–±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ *Maildir*, –∞ –µ—Å–ª–∏ –±–µ–∑ **/**, —Ç–æ –≤ –æ–±—ã—á–Ω–æ–º
*mbox* —Ñ–∞–π–ª–µ.

–í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º—ã —É–∫–∞–∑–∞–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é, –∏—Ö –º–æ–∂–Ω–æ
–±—ã–ª–æ –±—ã –∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å, –Ω–æ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –ø—É—Å–∫–∞–π. –î–∞–ª–µ–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
–≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—á—Ç—ã, –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –∫–∞–∫ `—Ñ–ª–∞–≥–∏` `—É—Å–ª–æ–≤–∏–µ –∏–ª–∏
–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–∏—Å—å–º–æ` `–¥–µ–π—Å—Ç–≤–∏–µ —Å –Ω–∏–º` –∏
–º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –≤ —Ñ–∞–π–ª–µ —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ —Ä–∞–∑. –î–ª—è –ø—Ä–∏–º–µ—Ä–∞, —è –ø–æ–¥–ø–∏—Å–∞–Ω
–Ω–∞ –ø–æ—á—Ç–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ nginx, –∏ —á—Ç–æ–±—ã –ø–∏—Å—å–º–∞ —Å —Ä–∞—Å—Å—ã–ª–∫–∏ –Ω–µ
–∑–∞—Å–æ—Ä—è–ª–∏ –º–æ–∏ "–í—Ö–æ–¥—è—â–∏–µ", —Ç–æ –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —è—â–∏–∫.

    PATH="/bin:/usr/bin:/usr/bin"
    MAILDIR="${HOME}"
    DEFAULT="/var/spool/mail/${LOGNAME}"
    VERBOSE="off"

    :0:
    * ^TO_.*@nginx\.
    Mail/nginx

    :0 c
    Mail/INBOX

–¢–µ–ø–µ—Ä—å –≤—Å–µ –ø–∏—Å—å–º–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã (*^TO_* –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç *To:* –∏–ª–∏
*Cc:* –∑–∞–≥–æ–ª–æ–≤–∫–∏) –Ω–∞ –∞–¥—Ä–µ—Å *\*@nginx.* –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª
**\~/Mail/nginx**. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∏—Å—å–º–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥–æ–π–¥—É—Ç –ø–æ–¥ —É—Å–ª–æ–≤–∏—è
—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **\~/Mail/INBOX**.

# –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

\== –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É + –∏ = == –ü–æ–º–∏–º–æ **+** (–ø–ª—é—Å–∞) –ø–µ—Ä–µ–¥ –ø—É—Ç—è–º–∏ —è—â–∏–∫–æ–≤ –∞-–ª—è

    spoolfile = "+INBOX"

–≤—ã –µ—â–µ –º–æ–∂–µ—Ç–µ –∏–Ω–æ–≥–¥–∞ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –∑–Ω–∞–∫ **=** (—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞), –∏ –∑–Ω–∞–π—Ç–µ, —á—Ç–æ
—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—ã –Ω–∏–º–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–∏–∫–∞–∫–æ–π –Ω–µ—Ç, –∞ –ø—Ä–æ—Å—Ç–æ
—Ç–∞–∫ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –∂–∏—Ç–µ–ª–µ–π –ì–µ—Ä–º–∞–Ω–∏–∏ (–∏–∑-–∑–∞ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã).

## mbox –∏–ª–∏ Maildir?

**Maildir** - —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ç–∞–∫ –∂–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –µ—â–µ 3
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **new**, **cur** –∏ **tmp**, –∏ –∫–∞–∂–¥–æ–µ –ø–∏—Å—å–º–æ
—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º.

**mbox** - —ç—Ç–æ —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥–æ–µ –ø–∏—Å—å–º–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ —Å–ª–æ–≤–∞ *From*
(–Ω–µ –ø—É—Ç–∞–π—Ç–µ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º *From:*)

–ß—Ç–æ –ª—É—á—à–µ? –í —Ü–µ–ª–æ–º –Ω–µ –≤–∞–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç–æ–≥–æ –∂–µ –∫–ª–∏–µ–Ω—Ç–∞ Mutt
–≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –ø–æ—á—Ç—É –º–µ–∂–¥—É —è—â–∏–∫–∞–º–∏, –∏ –∏–∑ —è—â–∏–∫–∞ –≤ —è—â–∏–∫ –æ–Ω–∞
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –¥–ª—è
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π **Maildir** –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤ —Å–≤–æ–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—
–ª–µ–≥–∫–æ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º.

    #!/bin/bash

    # —Å—á–∏—Ç–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–ø–∏—Å–µ–º) –≤ –º–∞—Å—Å–∏–≤
    NEW=("${HOME}/Mail/INBOX/new/"*)

    # –∑–∞–ø–∏—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ
    COUNT=${#NEW[@]}

    # –≤–æ—Ç —Å—Ç–æ–ª—å–∫–æ —É –Ω–∞—Å –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º
    echo $COUNT